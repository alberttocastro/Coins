 <%= link_to "New Publisher", new_publisher_path%>

<table>
  <tr>
    <th>Group</th>
  </tr>
 
  <% @publishers.each do |publisher| %>

  <% begin %>
    <% @group = Group.find(publisher.group_id) %>
    <% @conductor = Publisher.find(@group.conductor) %>
  <% rescue ActiveRecord::RecordNotFound %>
    <% @group = Group.new(number: 0) %>
    <% @conductor = Publisher.new(name: "Unknown") %>
  <% end %>

  <% begin %>
    <% @macroregion = Macroregion.find(publisher.macroregion_id) %>
  <% rescue ActiveRecord::RecordNotFound %>
    <% @macroregion = Macroregion.new(macroreg: "Error") %>
  <% end %>

    <tr>
      <td><%= publisher.name %></td>
      <td><%= publisher.email %></td>
      <td><%= publisher.cellphone %></td>
      <td><%= publisher.neighborhood %></td>
      <td><%= @macroregion.macroreg %></td>
      <td><%= @group.number.to_s + " - " + @conductor.name %></td>
      <td><%= link_to "Show", publisher_path(publisher) %></td>
      <td><%= link_to "Edit", edit_publisher_path(publisher) %></td>
      <td><%= link_to "Destroy", publisher_path(publisher), method: :delete, data:{confirm: "Are you sure?"} %></td>
    </tr>
  <% end %>
</table>